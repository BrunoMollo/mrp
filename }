<script lang="ts">
	import { process_line, type MasterMaterialLine } from '$lib';

	const material_info: MasterMaterialLine = {
		element: 'A',
		availbility: 0,
		wait_time_weeks: 1,
		batch_size: null,
		programed_recepcions: [],
		security_stock: 0
	};

	let weeks = 5;

	$: table = process_line(material_info, [], weeks);
</script>

<main class="flex flex-row p-4 gap-6">
	<section class="w-40">
		<label for="">Material Name</label>
		<input class="" type="text" bind:value={material_info.element} />
		<br />

		<label for="">Current Availbility</label>
		<input type="number" bind:value={material_info.availbility} />
		<br />

		<label for="">Leap Time</label>
		<input type="number" bind:value={material_info.wait_time_weeks} />
		<br />

		<label for="">Batch Size (leave empty if you can orrder what you need)</label>
		<input type="number" bind:value={material_info.batch_size} />
		<br />

		<label for="">Security Stock</label>
		<input type="number" bind:value={material_info.security_stock} />
		<br />

		<label for="">Weeks</label>
		<input type="number" bind:value={weeks} />
		<br />
	</section>

	<div class="flex flex-row">
		<div class="flex flex-col">
			<span>Semana</span>
			<span>Requeriemeintos Brutos</span>
			<span>Recepciones Programadas</span>
			<span>Proyecciones de Disponibilidad</span>
			<span>Requerimeintos Netos</span>
			<span>Liberacion planificada del Pedido</span>
		</div>

		{#each table as line}
			<div class="flex flex-col">
				<input width="2" value={line.week} type="number" disabled />
				<span>{line.week}</span>
				<span>-</span>
				<span>{line.programed_recepcions}</span>
				<span>{line.availbility_proyection}</span>
				<span>{line.net_requirement}</span>
				<span>{line.planned_release_of_the_order}</span>
			</div>
		{/each}
	</div>
</main>
